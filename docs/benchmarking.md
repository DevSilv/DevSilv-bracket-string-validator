# Benchmarking

The application performance may be benchmarked with a custom or a predefined (amateur) set of benchmark tests. For one run of the benchmark, there are benchmarked all of the validation algorithms (each one individually).

## Input

The benchmark data may be provided by the user in a file; these are custom benchmark data. Path to this file is given as an argument to the application call.

If no file is given, the benchmark data are generated on the fly.

### File with custom benchmark data

The file must be a JSON file. It must contain an array. Each element of this array must be also an array, and denotes one benchmark data set. Each element of the internal array may be any valid JSON value.

The minimum length of both arrays is zero. The maximum length of both arrays depends on the JSON parser implementation limit for it. Since current release of this application runs in Node.js, it uses Node.js's JSON parser. For some details on what are this parser's limits, see this Stack Overflow thread: https://stackoverflow.com/questions/24153996/is-there-a-limit-on-the-size-of-a-string-in-json-with-node-js

An example content of a file with custom benchmark data:
```json
[
  [
    "{}{}[][]"
  ],
  [
    "()()",
    null,
    { "a": "1" }
  ]
]
```

### Generated data

When generating, the following parameters are used:
|No|Name|Description|Value|
|-|-|-|-|
|1|`benchmarkRepeatNumber`|Determines how many times each function will be benchmarked. Each time there is generated a new set of data.|10|
|2|`benchmarkCaseCount`|Determines how many cases one set of data will hold.|100|
|3|`maxBenchmarkCaseLength`|Determines the maximum length in characters of one case. The actual length is random.|50|
|4|`onlyBracketProbability`|Determines the "probability" that one set of data will contain characters not being brackets. This means that if, for each set, a randomly generated value is below this number, this set will not contain any additional characters than brackets. Otherwise it will. For the benchmark to be reliable (i.e., to contain enough cases with only brackets), this number should be big enough (closer to 1 than to 0). This is because of two things: (1) the time of determining whether a string is a bracket string depends, among other things, on the number of characters before the first occurance of a non-bracket character; (2) for each character position in a string being generated, is it random whether such a character will occur or not.|0.8|
|5|`bracketDominancePercent`|Determines the "probability" whether a character will be a bracket or not.|70|

**_Info:_** _Current release of the application does not allow the user to modify values of the above parameters._

The only type of brackets that is used to generate the cases is `()`.

All of the generated characters, apart from brackets, comes from the [Unicode](https://en.wikipedia.org/wiki/Unicode) character codes range from 161 to 255 (both inclusive).

## Output

The benchmarking output looks like this:
1. The whole output is split into five parts; each part denotes performance measurement for one algorithm.
2. Each of the part contains a number of results, according to the `benchmarkRepeatNumber` parameter.
3. Each result denotes one run of the given algorithm with one data set. It contains two numbers: an integer number and a floting-point number. The first is an ID that denotes the set of data that the given algorithm was executed with. The latter is the average time, in nanoseconds, that it has taken to run the given algorithm with this set of data.

### An example of the output

The following is an example benchmark output generated by running the benchmark once:
```
{ isBracketStringValidCounter:
   [ { datasetID: 0, timeNs: 4.71506 },
     { datasetID: 1, timeNs: 2.06404 },
     { datasetID: 2, timeNs: 2.28755 },
     { datasetID: 3, timeNs: 1.8839700000000001 },
     { datasetID: 4, timeNs: 1.492380000000001 },
     { datasetID: 5, timeNs: 1.2382900000000001 },
     { datasetID: 6, timeNs: 1.37458 },
     { datasetID: 7, timeNs: 3.19094 },
     { datasetID: 8, timeNs: 1.2402599999999997 },
     { datasetID: 9, timeNs: 1.1814100000000003 } ],
  isBracketStringValidRecursion:
   [ { datasetID: 0, timeNs: 16.47348 },
     { datasetID: 1, timeNs: 2.441959999999999 },
     { datasetID: 2, timeNs: 3.460720000000001 },
     { datasetID: 3, timeNs: 2.5983199999999993 },
     { datasetID: 4, timeNs: 2.2728299999999986 },
     { datasetID: 5, timeNs: 2.30637 },
     { datasetID: 6, timeNs: 1.7964599999999995 },
     { datasetID: 7, timeNs: 1.8330799999999998 },
     { datasetID: 8, timeNs: 21.300079999999994 },
     { datasetID: 9, timeNs: 0.9768199999999996 } ],
  isBracketStringValidShortest:
   [ { datasetID: 0, timeNs: 28.601209999999984 },
     { datasetID: 1, timeNs: 11.595149999999999 },
     { datasetID: 2, timeNs: 20.050850000000004 },
     { datasetID: 3, timeNs: 10.827919999999999 },
     { datasetID: 4, timeNs: 9.43689 },
     { datasetID: 5, timeNs: 26.357879999999994 },
     { datasetID: 6, timeNs: 9.44486 },
     { datasetID: 7, timeNs: 9.14178 },
     { datasetID: 8, timeNs: 12.301979999999999 },
     { datasetID: 9, timeNs: 8.92561 } ],
  isBracketStringValidStack:
   [ { datasetID: 0, timeNs: 11.529759999999996 },
     { datasetID: 1, timeNs: 3.6793799999999988 },
     { datasetID: 2, timeNs: 3.2953600000000005 },
     { datasetID: 3, timeNs: 2.538100000000002 },
     { datasetID: 4, timeNs: 1.6070700000000004 },
     { datasetID: 5, timeNs: 3.8799499999999996 },
     { datasetID: 6, timeNs: 2.61237 },
     { datasetID: 7, timeNs: 1.64728 },
     { datasetID: 8, timeNs: 1.6700299999999997 },
     { datasetID: 9, timeNs: 1.9353499999999988 } ],
  isBracketStringValidStackList:
   [ { datasetID: 0, timeNs: 20.743509999999997 },
     { datasetID: 1, timeNs: 6.558210000000002 },
     { datasetID: 2, timeNs: 7.306899999999996 },
     { datasetID: 3, timeNs: 4.704689999999999 },
     { datasetID: 4, timeNs: 3.877069999999998 },
     { datasetID: 5, timeNs: 4.997899999999999 },
     { datasetID: 6, timeNs: 32.99897999999999 },
     { datasetID: 7, timeNs: 5.42841 },
     { datasetID: 8, timeNs: 4.962099999999999 },
     { datasetID: 9, timeNs: 5.6343 } ] }
```